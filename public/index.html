<!DOCTYPE html>
<html>
<body>
<h3>APK Signer</h3>

<form id="form">
  <input type="file" id="apk" required />
  <button>Sign</button>
</form>

<p id="status"></p>

<script>
const form = document.getElementById("form");
const status = document.getElementById("status");

form.onsubmit = async e => {
  e.preventDefault();
  const file = apk.files[0];
  if(!file) return;

  status.innerText = "Signing...";

  const fd = new FormData();
  fd.append("apk", file);

  const r = await fetch("/upload", { method:"POST", body: fd });
  if(!r.ok){
    status.innerText = "Server error ❌";
    return;
  }

  const b = await r.blob();
  const a = document.createElement("a");
  a.href = URL.createObjectURL(b);
  a.download = "signed.apk";
  a.click();

  status.innerText = "Done ✔";
};
</script>
</body>
</html>